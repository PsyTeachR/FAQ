<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Topic 4 Wrangling Questionnaire Data | Frequently Asked Questions (FAQ) from University of Glasgow Psychology Students</title>
  <meta name="description" content="Frequently Asked Questions." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Topic 4 Wrangling Questionnaire Data | Frequently Asked Questions (FAQ) from University of Glasgow Psychology Students" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Frequently Asked Questions." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Topic 4 Wrangling Questionnaire Data | Frequently Asked Questions (FAQ) from University of Glasgow Psychology Students" />
  
  <meta name="twitter:description" content="Frequently Asked Questions." />
  

<meta name="author" content="Team #PsyTeachR" />


<meta name="date" content="2021-08-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="r-tips-and-tricks.html"/>
<link rel="next" href="microsoft-teams.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="include/psyteachr.css" type="text/css" />
<link rel="stylesheet" href="include/webex.css" type="text/css" />
<link rel="stylesheet" href="include/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">PsyTeachR Frequently Asked Questions</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a></li>
<li class="chapter" data-level="1" data-path="installingupdating-r-and-rstudio.html"><a href="installingupdating-r-and-rstudio.html"><i class="fa fa-check"></i><b>1</b> Installing/Updating R and RStudio</a><ul>
<li class="chapter" data-level="1.1" data-path="installingupdating-r-and-rstudio.html"><a href="installingupdating-r-and-rstudio.html#what-is-r-and-rstudio-and-how-do-i-get-them"><i class="fa fa-check"></i><b>1.1</b> What is R and RStudio, and how do I get them?</a><ul>
<li class="chapter" data-level="1.1.1" data-path="installingupdating-r-and-rstudio.html"><a href="installingupdating-r-and-rstudio.html#local"><i class="fa fa-check"></i><b>1.1.1</b> Installing R and RStudio</a></li>
<li class="chapter" data-level="1.1.2" data-path="installingupdating-r-and-rstudio.html"><a href="installingupdating-r-and-rstudio.html#server"><i class="fa fa-check"></i><b>1.1.2</b> Using the Department’s RStudio Server</a></li>
<li class="chapter" data-level="1.1.3" data-path="installingupdating-r-and-rstudio.html"><a href="installingupdating-r-and-rstudio.html#vdesk"><i class="fa fa-check"></i><b>1.1.3</b> Using Virtual Desktop</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="installingupdating-r-and-rstudio.html"><a href="installingupdating-r-and-rstudio.html#how-do-i-update-r-rstudio-and-add-on-packages-to-the-latest-versions"><i class="fa fa-check"></i><b>1.2</b> How do I update R, RStudio, and add-on packages to the latest versions?</a></li>
<li class="chapter" data-level="1.3" data-path="installingupdating-r-and-rstudio.html"><a href="installingupdating-r-and-rstudio.html#serverfiles"><i class="fa fa-check"></i><b>1.3</b> How do I access files when using the RStudio Server?</a><ul>
<li class="chapter" data-level="1.3.1" data-path="installingupdating-r-and-rstudio.html"><a href="installingupdating-r-and-rstudio.html#loading-data-into-the-rstudio-server"><i class="fa fa-check"></i><b>1.3.1</b> Loading data into the RStudio Server</a></li>
<li class="chapter" data-level="1.3.2" data-path="installingupdating-r-and-rstudio.html"><a href="installingupdating-r-and-rstudio.html#downloading-files-from-the-rstudio-server"><i class="fa fa-check"></i><b>1.3.2</b> Downloading files from the RStudio Server</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="troubleshooting-r-and-rstudio.html"><a href="troubleshooting-r-and-rstudio.html"><i class="fa fa-check"></i><b>2</b> Troubleshooting R and RStudio</a><ul>
<li class="chapter" data-level="2.1" data-path="troubleshooting-r-and-rstudio.html"><a href="troubleshooting-r-and-rstudio.html#every-time-i-knit-i-get-a-message-that-packages-are-missing-and-it-wont-knit."><i class="fa fa-check"></i><b>2.1</b> Every time I knit, I get a message that packages are missing, and it won’t knit.</a></li>
<li class="chapter" data-level="2.2" data-path="troubleshooting-r-and-rstudio.html"><a href="troubleshooting-r-and-rstudio.html#why-cant-i-compile-packages-from-source"><i class="fa fa-check"></i><b>2.2</b> Why can’t I compile packages from source?</a></li>
<li class="chapter" data-level="2.3" data-path="troubleshooting-r-and-rstudio.html"><a href="troubleshooting-r-and-rstudio.html#xcrun"><i class="fa fa-check"></i><b>2.3</b> When I try to compile, I get the following error message:</a></li>
<li class="chapter" data-level="2.4" data-path="troubleshooting-r-and-rstudio.html"><a href="troubleshooting-r-and-rstudio.html#rtools"><i class="fa fa-check"></i><b>2.4</b> I am unable to install add-on packages from source.</a></li>
<li class="chapter" data-level="2.5" data-path="troubleshooting-r-and-rstudio.html"><a href="troubleshooting-r-and-rstudio.html#catalina"><i class="fa fa-check"></i><b>2.5</b> RStudio keeps crashing with MacOS 10.15 Catalina</a></li>
<li class="chapter" data-level="2.6" data-path="troubleshooting-r-and-rstudio.html"><a href="troubleshooting-r-and-rstudio.html#when-i-start-rstudio-i-get-the-error-fatal-error-unable-to-initialize-the-jit"><i class="fa fa-check"></i><b>2.6</b> When I start RStudio, I get the error “Fatal error: unable to initialize the JIT”</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="r-tips-and-tricks.html"><a href="r-tips-and-tricks.html"><i class="fa fa-check"></i><b>3</b> R Tips and Tricks</a><ul>
<li class="chapter" data-level="3.1" data-path="r-tips-and-tricks.html"><a href="r-tips-and-tricks.html#show-r-code-in-word"><i class="fa fa-check"></i><b>3.1</b> Show R code in Word</a></li>
<li class="chapter" data-level="3.2" data-path="r-tips-and-tricks.html"><a href="r-tips-and-tricks.html#save-plots-as-images"><i class="fa fa-check"></i><b>3.2</b> Save plots as images</a></li>
<li class="chapter" data-level="3.3" data-path="r-tips-and-tricks.html"><a href="r-tips-and-tricks.html#import-data-from-multiple-files"><i class="fa fa-check"></i><b>3.3</b> Import data from multiple files</a></li>
<li class="chapter" data-level="3.4" data-path="r-tips-and-tricks.html"><a href="r-tips-and-tricks.html#detect-runs-in-a-sequence"><i class="fa fa-check"></i><b>3.4</b> Detect “runs” in a sequence</a></li>
<li class="chapter" data-level="3.5" data-path="r-tips-and-tricks.html"><a href="r-tips-and-tricks.html#highlight-a-range-of-x-values-on-a-plot"><i class="fa fa-check"></i><b>3.5</b> Highlight a range of x-values on a plot</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="wrangling-questionnaire-data.html"><a href="wrangling-questionnaire-data.html"><i class="fa fa-check"></i><b>4</b> Wrangling Questionnaire Data</a><ul>
<li class="chapter" data-level="4.1" data-path="wrangling-questionnaire-data.html"><a href="wrangling-questionnaire-data.html#how-to-i-convert-string-values-to-numeric-values"><i class="fa fa-check"></i><b>4.1</b> How to I convert string values to numeric values?</a></li>
<li class="chapter" data-level="4.2" data-path="wrangling-questionnaire-data.html"><a href="wrangling-questionnaire-data.html#how-do-i-reverse-score-a-subset-of-items-on-my-questionnaire"><i class="fa fa-check"></i><b>4.2</b> How do I reverse score a subset of items on my questionnaire?</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="microsoft-teams.html"><a href="microsoft-teams.html"><i class="fa fa-check"></i><b>5</b> Microsoft Teams</a><ul>
<li class="chapter" data-level="5.1" data-path="microsoft-teams.html"><a href="microsoft-teams.html#pinning-channels"><i class="fa fa-check"></i><b>5.1</b> Pinning channels</a></li>
<li class="chapter" data-level="5.2" data-path="microsoft-teams.html"><a href="microsoft-teams.html#what-is-the-best-way-to-share-r-code-on-microsoft-teams"><i class="fa fa-check"></i><b>5.2</b> What is the best way to share R code on Microsoft Teams?</a><ul>
<li class="chapter" data-level="5.2.1" data-path="microsoft-teams.html"><a href="microsoft-teams.html#quick-and-easy-method"><i class="fa fa-check"></i><b>5.2.1</b> Quick and easy method</a></li>
<li class="chapter" data-level="5.2.2" data-path="microsoft-teams.html"><a href="microsoft-teams.html#more-flexible-method"><i class="fa fa-check"></i><b>5.2.2</b> More flexible method</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="using-zoom.html"><a href="using-zoom.html"><i class="fa fa-check"></i><b>6</b> Using Zoom</a><ul>
<li class="chapter" data-level="6.1" data-path="using-zoom.html"><a href="using-zoom.html#how-do-i-set-up-zoom-for-my-classes"><i class="fa fa-check"></i><b>6.1</b> How do I set up Zoom for my classes?</a></li>
<li class="chapter" data-level="6.2" data-path="using-zoom.html"><a href="using-zoom.html#update"><i class="fa fa-check"></i><b>6.2</b> How do I update Zoom?</a></li>
<li class="chapter" data-level="6.3" data-path="using-zoom.html"><a href="using-zoom.html#zemail"><i class="fa fa-check"></i><b>6.3</b> How do I sign in with my Zoom email address?</a></li>
</ul></li>
<li class="divider"></li>
<li><a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" 
    target="blank"><img alt="Creative Commons License" 
    style="border-width:0" 
    src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a></li>
<li><a href="https://psyteachr.github.io/" target="blank">PsyTeachR</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Frequently Asked Questions (FAQ) from University of Glasgow Psychology Students</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="wrangling-questionnaire-data" class="section level1">
<h1><span class="header-section-number">Topic 4</span> Wrangling Questionnaire Data</h1>
<div id="how-to-i-convert-string-values-to-numeric-values" class="section level2">
<h2><span class="header-section-number">4.1</span> How to I convert string values to numeric values?</h2>
<p>A very common situation is that you want to convert string values (“Almost Always”, “Frequently”) into numeric values (5, 4, etc) so that we can calculate a score.</p>
<p>The solution I present here will use something called a “lookup table” that matches string values to numbers.</p>
<p>First, let’s assume the following (made-up) questionnaire asks four questions about hygiene. When you bathe, how often do you:</p>
<ol style="list-style-type: decimal">
<li>Wash your legs?</li>
<li>Wash behind your ears?</li>
<li>Wash between your toes?</li>
<li>Shampoo your hair?</li>
</ol>
<p>Let’s assume that answers are on a scale made up of the values “Never”, “Sometimes”, “Frequently”, “Always”, which we want to assign scores of 0, 1, 2, and 3 respectively.</p>
<p>Here is some (also made-up) data from five participants, stored in a tibble named <code>dat</code>.</p>
<table>
<thead>
<tr class="header">
<th align="left">subj_id</th>
<th align="left">wash_legs</th>
<th align="left">wash_ears</th>
<th align="left">wash_toes</th>
<th align="left">shampoo</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">S01</td>
<td align="left">Sometimes</td>
<td align="left">Never</td>
<td align="left">Never</td>
<td align="left">Frequently</td>
</tr>
<tr class="even">
<td align="left">S02</td>
<td align="left">Sometimes</td>
<td align="left">Frequently</td>
<td align="left">Frequently</td>
<td align="left">Always</td>
</tr>
<tr class="odd">
<td align="left">S03</td>
<td align="left">Never</td>
<td align="left">Never</td>
<td align="left">Never</td>
<td align="left">Frequently</td>
</tr>
<tr class="even">
<td align="left">S04</td>
<td align="left">Always</td>
<td align="left">Always</td>
<td align="left">Sometimes</td>
<td align="left">Always</td>
</tr>
<tr class="odd">
<td align="left">S05</td>
<td align="left">Frequently</td>
<td align="left">Sometimes</td>
<td align="left">Never</td>
<td align="left">Sometimes</td>
</tr>
</tbody>
</table>
<p>(If you want to make <code>dat</code> so you can follow along with the example by running the code in R, click the button below.)</p>
<div class="webex-solution">
<button>
show me the R code to create the table ‘dat’
</button>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" title="1"><span class="kw">library</span>(<span class="st">&quot;tidyverse&quot;</span>)</a>
<a class="sourceLine" id="cb24-2" title="2"></a>
<a class="sourceLine" id="cb24-3" title="3">dat &lt;-<span class="st"> </span><span class="kw">tribble</span>(</a>
<a class="sourceLine" id="cb24-4" title="4">  <span class="op">~</span>subj_id, <span class="op">~</span>wash_legs,   <span class="op">~</span>wash_ears,   <span class="op">~</span>wash_toes,   <span class="op">~</span>shampoo,</a>
<a class="sourceLine" id="cb24-5" title="5">  <span class="st">&quot;S01&quot;</span>,    <span class="st">&quot;Sometimes&quot;</span>,  <span class="st">&quot;Never&quot;</span>,      <span class="st">&quot;Never&quot;</span>,      <span class="st">&quot;Frequently&quot;</span>,</a>
<a class="sourceLine" id="cb24-6" title="6">  <span class="st">&quot;S02&quot;</span>,    <span class="st">&quot;Sometimes&quot;</span>,  <span class="st">&quot;Frequently&quot;</span>, <span class="st">&quot;Frequently&quot;</span>, <span class="st">&quot;Always&quot;</span>,</a>
<a class="sourceLine" id="cb24-7" title="7">  <span class="st">&quot;S03&quot;</span>,    <span class="st">&quot;Never&quot;</span>,      <span class="st">&quot;Never&quot;</span>,      <span class="st">&quot;Never&quot;</span>,      <span class="st">&quot;Frequently&quot;</span>,</a>
<a class="sourceLine" id="cb24-8" title="8">  <span class="st">&quot;S04&quot;</span>,    <span class="st">&quot;Always&quot;</span>,     <span class="st">&quot;Always&quot;</span>,     <span class="st">&quot;Sometimes&quot;</span>,  <span class="st">&quot;Always&quot;</span>,</a>
<a class="sourceLine" id="cb24-9" title="9">  <span class="st">&quot;S05&quot;</span>,    <span class="st">&quot;Frequently&quot;</span>, <span class="st">&quot;Sometimes&quot;</span>,  <span class="st">&quot;Never&quot;</span>,      <span class="st">&quot;Sometimes&quot;</span>)</a></code></pre></div>
</div>
<p>This data is in <em>wide</em> format: there is a single row for each participant with data for each question forming the columns. What we are going to do first is to convert this data from wide to long using <code>pivot_longer()</code>. (You’ll see why in a minute.)</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" title="1">dat_long &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb25-2" title="2"><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="dt">cols =</span> wash_legs<span class="op">:</span>shampoo,</a>
<a class="sourceLine" id="cb25-3" title="3">               <span class="dt">names_to =</span> <span class="st">&quot;question&quot;</span>, <span class="dt">values_to =</span> <span class="st">&quot;response&quot;</span>)</a></code></pre></div>
<p>Take a look at <code>dat_long</code>.</p>
<table>
<thead>
<tr class="header">
<th align="left">subj_id</th>
<th align="left">question</th>
<th align="left">response</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">S01</td>
<td align="left">wash_legs</td>
<td align="left">Sometimes</td>
</tr>
<tr class="even">
<td align="left">S01</td>
<td align="left">wash_ears</td>
<td align="left">Never</td>
</tr>
<tr class="odd">
<td align="left">S01</td>
<td align="left">wash_toes</td>
<td align="left">Never</td>
</tr>
<tr class="even">
<td align="left">S01</td>
<td align="left">shampoo</td>
<td align="left">Frequently</td>
</tr>
<tr class="odd">
<td align="left">S02</td>
<td align="left">wash_legs</td>
<td align="left">Sometimes</td>
</tr>
<tr class="even">
<td align="left">S02</td>
<td align="left">wash_ears</td>
<td align="left">Frequently</td>
</tr>
<tr class="odd">
<td align="left">S02</td>
<td align="left">wash_toes</td>
<td align="left">Frequently</td>
</tr>
<tr class="even">
<td align="left">S02</td>
<td align="left">shampoo</td>
<td align="left">Always</td>
</tr>
<tr class="odd">
<td align="left">S03</td>
<td align="left">wash_legs</td>
<td align="left">Never</td>
</tr>
<tr class="even">
<td align="left">S03</td>
<td align="left">wash_ears</td>
<td align="left">Never</td>
</tr>
<tr class="odd">
<td align="left">S03</td>
<td align="left">wash_toes</td>
<td align="left">Never</td>
</tr>
<tr class="even">
<td align="left">S03</td>
<td align="left">shampoo</td>
<td align="left">Frequently</td>
</tr>
<tr class="odd">
<td align="left">S04</td>
<td align="left">wash_legs</td>
<td align="left">Always</td>
</tr>
<tr class="even">
<td align="left">S04</td>
<td align="left">wash_ears</td>
<td align="left">Always</td>
</tr>
<tr class="odd">
<td align="left">S04</td>
<td align="left">wash_toes</td>
<td align="left">Sometimes</td>
</tr>
<tr class="even">
<td align="left">S04</td>
<td align="left">shampoo</td>
<td align="left">Always</td>
</tr>
<tr class="odd">
<td align="left">S05</td>
<td align="left">wash_legs</td>
<td align="left">Frequently</td>
</tr>
<tr class="even">
<td align="left">S05</td>
<td align="left">wash_ears</td>
<td align="left">Sometimes</td>
</tr>
<tr class="odd">
<td align="left">S05</td>
<td align="left">wash_toes</td>
<td align="left">Never</td>
</tr>
<tr class="even">
<td align="left">S05</td>
<td align="left">shampoo</td>
<td align="left">Sometimes</td>
</tr>
</tbody>
</table>
<p>Now we only have <em>one</em> variable we need to convert to numeric values (<code>response</code>) instead of the original four. There is an easy solution: we create a “lookup table” mapping the string values to the numeric values like so.</p>
<p>But first let’s check what the unique string values are in the data. Our lookup table must match these <em>exactly</em> or the approach won’t work.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" title="1">dat_long <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-2" title="2"><span class="st">  </span><span class="kw">distinct</span>(response) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-3" title="3"><span class="st">  </span><span class="kw">pull</span>()</a></code></pre></div>
<pre><code>## [1] &quot;Sometimes&quot;  &quot;Never&quot;      &quot;Frequently&quot; &quot;Always&quot;</code></pre>
<p>This step is important because sometimes these fields can have special characters that you don’t normally when you print out a table. The <code>distinct() %&gt;% pull()</code> pattern will give you those values in a way that makes them visible. For instance, a student once had values in the data like this:</p>
<pre><code>[1] &quot;Somewhat\nInfrequently&quot; &quot;Somewhat\nFrequently&quot;   &quot;Very\nInfrequently&quot;
[4] &quot;Almost\nNever&quot;          &quot;Very\nFrequently&quot;       &quot;Almost\nAlways&quot;</code></pre>
<p>and the lookup table was constantly failing because the lookup table they created did not have the <code>\n</code> in the middle of each string. <em>Computers are very literal!</em></p>
<p>OK now we’re ready to create our lookup table where we match these four values to numbers.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" title="1">lookup &lt;-<span class="st"> </span><span class="kw">tribble</span>(</a>
<a class="sourceLine" id="cb29-2" title="2">  <span class="op">~</span>response, <span class="op">~</span>score,</a>
<a class="sourceLine" id="cb29-3" title="3">  <span class="st">&quot;Never&quot;</span>,      <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb29-4" title="4">  <span class="st">&quot;Sometimes&quot;</span>,  <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb29-5" title="5">  <span class="st">&quot;Frequently&quot;</span>, <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb29-6" title="6">  <span class="st">&quot;always&quot;</span>,     <span class="dv">3</span>)</a></code></pre></div>
<p>As the final step, we <code>inner_join()</code> the original table <code>dat_long</code> to <code>lookup</code> on the variable <code>response</code>.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" title="1">joined &lt;-<span class="st"> </span><span class="kw">inner_join</span>(dat_long, lookup, <span class="dt">by =</span> <span class="st">&quot;response&quot;</span>)</a></code></pre></div>
<p><strong>IMPORTANT</strong>: You should check to make sure that the join worked as intended. The values in the lookup table must <em>exactly</em> match the values in the <code>response</code> column of <code>dat_long</code>. It is easy to make a typo in the lookup table, and those values will be lost. An easy test is to make sure that the number of rows in <code>joined</code> matches the number of rows in <code>dat_long</code>.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" title="1"><span class="kw">stopifnot</span>(<span class="kw">nrow</span>(joined) <span class="op">==</span><span class="st"> </span><span class="kw">nrow</span>(dat_long))</a></code></pre></div>
<p>The function <code>stopifnot()</code> will make our script fail if the stated condition (that both tables have the same number of rows) is not satisfied.</p>
<p>Uh oh. Running it gives <code>Error: nrow(joined) == nrow(dat_long) is not TRUE</code>. The test failed, because I deliberately included a typo in the lookup table. Can you see it?</p>
<div class="webex-solution">
<button>
what is it?
</button>
<p><code>always</code> should be <code>Always</code>. Capitalization matters!</p>
</div>
<p>So let’s fix our lookup table and then we should be good to go. Here is the full code for this demonstration:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" title="1">dat_long &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb32-2" title="2"><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="dt">cols =</span> wash_legs<span class="op">:</span>shampoo,</a>
<a class="sourceLine" id="cb32-3" title="3">               <span class="dt">names_to =</span> <span class="st">&quot;question&quot;</span>, <span class="dt">values_to =</span> <span class="st">&quot;response&quot;</span>)</a>
<a class="sourceLine" id="cb32-4" title="4"></a>
<a class="sourceLine" id="cb32-5" title="5"><span class="co">## check for hidden values</span></a>
<a class="sourceLine" id="cb32-6" title="6">dat_long <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb32-7" title="7"><span class="st">  </span><span class="kw">distinct</span>(response) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb32-8" title="8"><span class="st">  </span><span class="kw">pull</span>()</a>
<a class="sourceLine" id="cb32-9" title="9"></a>
<a class="sourceLine" id="cb32-10" title="10">lookup &lt;-<span class="st"> </span><span class="kw">tribble</span>(</a>
<a class="sourceLine" id="cb32-11" title="11">  <span class="op">~</span>response, <span class="op">~</span>score,</a>
<a class="sourceLine" id="cb32-12" title="12">  <span class="st">&quot;Never&quot;</span>,      <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb32-13" title="13">  <span class="st">&quot;Sometimes&quot;</span>,  <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb32-14" title="14">  <span class="st">&quot;Frequently&quot;</span>, <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb32-15" title="15">  <span class="st">&quot;Always&quot;</span>,     <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb32-16" title="16"></a>
<a class="sourceLine" id="cb32-17" title="17">joined &lt;-<span class="st"> </span><span class="kw">inner_join</span>(dat_long, lookup, <span class="dt">by =</span> <span class="st">&quot;response&quot;</span>)</a>
<a class="sourceLine" id="cb32-18" title="18"></a>
<a class="sourceLine" id="cb32-19" title="19"><span class="co">## test whether the number of rows match</span></a>
<a class="sourceLine" id="cb32-20" title="20"><span class="kw">stopifnot</span>(<span class="kw">nrow</span>(joined) <span class="op">==</span><span class="st"> </span><span class="kw">nrow</span>(dat_long))</a></code></pre></div>
<p>You could then use</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" title="1">joined <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb33-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(subj_id) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb33-3" title="3"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">hygiene =</span> <span class="kw">sum</span>(score))</a></code></pre></div>
<p>to calculate a score for each subject.</p>
<p><em>August 18, 2021. -DB</em></p>
</div>
<div id="how-do-i-reverse-score-a-subset-of-items-on-my-questionnaire" class="section level2">
<h2><span class="header-section-number">4.2</span> How do I reverse score a subset of items on my questionnaire?</h2>
<p>We will be working with a made-up scale with six items which measures how much respondents appreciate dogs. People respond to each of the six items on a 5 point likert scale, where 1=strongly disagree, 2=somewhat disagree, 3=neutral, 4=somewhat agree, 5=strongly agree.</p>
<table>
<caption><span id="tab:dog-scale">Table 4.1: </span>The Dog Appreciation Scale</caption>
<thead>
<tr class="header">
<th align="left">item</th>
<th align="left">reverse_score</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">I like dogs</td>
<td align="left">FALSE</td>
</tr>
<tr class="even">
<td align="left">Dogs are fun</td>
<td align="left">FALSE</td>
</tr>
<tr class="odd">
<td align="left">Cats are better than dogs</td>
<td align="left">TRUE</td>
</tr>
<tr class="even">
<td align="left">Dogs are helpful</td>
<td align="left">FALSE</td>
</tr>
<tr class="odd">
<td align="left">Dogs are too noisy</td>
<td align="left">TRUE</td>
</tr>
<tr class="even">
<td align="left">Dogs are too much responsibility</td>
<td align="left">TRUE</td>
</tr>
</tbody>
</table>
<p>Here is some made-up questionnaire data with 6 items and 3 subjects, contained in the tibble named <code>das</code>. We want to reverse score the items “Cats are better than dogs”, “Dogs are too noisy”, and “Dogs are too much responsibility” before summing up the total for each subject.</p>
<pre><code>## # A tibble: 18 x 3
##    subj_id item                             score
##    &lt;chr&gt;   &lt;chr&gt;                            &lt;dbl&gt;
##  1 S01     I like dogs                          5
##  2 S01     Dogs are fun                         5
##  3 S01     Cats are better than dogs            1
##  4 S01     Dogs are helpful                     4
##  5 S01     Dogs are too noisy                   2
##  6 S01     Dogs are too much responsibility     2
##  7 S02     I like dogs                          3
##  8 S02     Dogs are fun                         4
##  9 S02     Cats are better than dogs            2
## 10 S02     Dogs are helpful                     4
## 11 S02     Dogs are too noisy                   3
## 12 S02     Dogs are too much responsibility     5
## 13 S03     I like dogs                          1
## 14 S03     Dogs are fun                         3
## 15 S03     Cats are better than dogs            5
## 16 S03     Dogs are helpful                     2
## 17 S03     Dogs are too noisy                   4
## 18 S03     Dogs are too much responsibility     5</code></pre>
<div class="webex-solution">
<button>
show me the code to create the table ‘das’
</button>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" title="1"><span class="kw">library</span>(<span class="st">&quot;tidyverse&quot;</span>)</a>
<a class="sourceLine" id="cb35-2" title="2"></a>
<a class="sourceLine" id="cb35-3" title="3">das &lt;-<span class="st"> </span><span class="kw">tribble</span>(</a>
<a class="sourceLine" id="cb35-4" title="4">  <span class="op">~</span>subj_id, <span class="op">~</span>item, <span class="op">~</span>score,</a>
<a class="sourceLine" id="cb35-5" title="5">  <span class="st">&quot;S01&quot;</span>, <span class="st">&quot;I like dogs&quot;</span>,                      <span class="dv">5</span>,</a>
<a class="sourceLine" id="cb35-6" title="6">  <span class="st">&quot;S01&quot;</span>, <span class="st">&quot;Dogs are fun&quot;</span>,                     <span class="dv">5</span>,</a>
<a class="sourceLine" id="cb35-7" title="7">  <span class="st">&quot;S01&quot;</span>, <span class="st">&quot;Cats are better than dogs&quot;</span>,        <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb35-8" title="8">  <span class="st">&quot;S01&quot;</span>, <span class="st">&quot;Dogs are helpful&quot;</span>,                 <span class="dv">4</span>,</a>
<a class="sourceLine" id="cb35-9" title="9">  <span class="st">&quot;S01&quot;</span>, <span class="st">&quot;Dogs are too noisy&quot;</span>,               <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb35-10" title="10">  <span class="st">&quot;S01&quot;</span>, <span class="st">&quot;Dogs are too much responsibility&quot;</span>, <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb35-11" title="11">  <span class="st">&quot;S02&quot;</span>, <span class="st">&quot;I like dogs&quot;</span>,                      <span class="dv">3</span>,</a>
<a class="sourceLine" id="cb35-12" title="12">  <span class="st">&quot;S02&quot;</span>, <span class="st">&quot;Dogs are fun&quot;</span>,                     <span class="dv">4</span>,</a>
<a class="sourceLine" id="cb35-13" title="13">  <span class="st">&quot;S02&quot;</span>, <span class="st">&quot;Cats are better than dogs&quot;</span>,        <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb35-14" title="14">  <span class="st">&quot;S02&quot;</span>, <span class="st">&quot;Dogs are helpful&quot;</span>,                 <span class="dv">4</span>,</a>
<a class="sourceLine" id="cb35-15" title="15">  <span class="st">&quot;S02&quot;</span>, <span class="st">&quot;Dogs are too noisy&quot;</span>,               <span class="dv">3</span>,</a>
<a class="sourceLine" id="cb35-16" title="16">  <span class="st">&quot;S02&quot;</span>, <span class="st">&quot;Dogs are too much responsibility&quot;</span>, <span class="dv">5</span>,</a>
<a class="sourceLine" id="cb35-17" title="17">  <span class="st">&quot;S03&quot;</span>, <span class="st">&quot;I like dogs&quot;</span>,                      <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb35-18" title="18">  <span class="st">&quot;S03&quot;</span>, <span class="st">&quot;Dogs are fun&quot;</span>,                     <span class="dv">3</span>,</a>
<a class="sourceLine" id="cb35-19" title="19">  <span class="st">&quot;S03&quot;</span>, <span class="st">&quot;Cats are better than dogs&quot;</span>,        <span class="dv">5</span>,</a>
<a class="sourceLine" id="cb35-20" title="20">  <span class="st">&quot;S03&quot;</span>, <span class="st">&quot;Dogs are helpful&quot;</span>,                 <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb35-21" title="21">  <span class="st">&quot;S03&quot;</span>, <span class="st">&quot;Dogs are too noisy&quot;</span>,               <span class="dv">4</span>,</a>
<a class="sourceLine" id="cb35-22" title="22">  <span class="st">&quot;S03&quot;</span>, <span class="st">&quot;Dogs are too much responsibility&quot;</span>, <span class="dv">5</span>)</a></code></pre></div>
</div>
<p>First, we assume that you have your data in long format, like the table above. If you don’t, then please see the materials on reshaping from wide to long, such as <a href="https://psyteachr.github.io/msc-data-skills/tidyr.html#pivot_longer">this section from the MSC book</a>.</p>
<p>We are going to use a programming trick that we’ll call “the N-plus-one-minus-X trick” to score the items that need to be reverse coded. This trick will work whenever you have a scale with N scale points that goes in integer steps from 1 to N (e.g., 1, 2, 3, 4, 5). You subtract Xs (each observed score) from N+1 to get the reversed value.</p>
<p><em>newscore = (number_of_scale_points + 1) - oldscore</em></p>
<p>So if you have a 5 point scale, it is:</p>
<p><em>newscore = 6 - oldscore</em></p>
<p>and a 7 point scale is</p>
<p><em>newscore = 8 - oldscore</em>.</p>
<p>You can see this works using the following code:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" title="1">oldscores &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span></a>
<a class="sourceLine" id="cb36-2" title="2">newscores &lt;-<span class="st"> </span><span class="dv">6</span> <span class="op">-</span><span class="st"> </span>oldscores</a>
<a class="sourceLine" id="cb36-3" title="3"></a>
<a class="sourceLine" id="cb36-4" title="4"><span class="kw">rbind</span>(oldscores, newscores)</a></code></pre></div>
<pre><code>##           [,1] [,2] [,3] [,4] [,5]
## oldscores    1    2    3    4    5
## newscores    5    4    3    2    1</code></pre>
<p><strong>Note: If your scale goes from 0 to N, then use N - X rather than (N + 1) - X to reverse score.</strong></p>
<p>So we can see already that we need something like:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" title="1">das <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb38-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">newscore =</span> <span class="dv">6</span> <span class="op">-</span><span class="st"> </span>score)</a></code></pre></div>
<p>but <em>only</em> for those items that need to be reverse scored. This is where <code>if_else()</code> comes in. Or, better said, where <code>if_else()</code> comes <code>%in%</code> (if you can pardon a bit of R humor).</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" title="1">das_coded &lt;-<span class="st"> </span>das <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb39-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">newscore =</span> <span class="kw">if_else</span>(item <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Cats are better than dogs&quot;</span>,</a>
<a class="sourceLine" id="cb39-3" title="3">                                        <span class="st">&quot;Dogs are too noisy&quot;</span>,</a>
<a class="sourceLine" id="cb39-4" title="4">                                        <span class="st">&quot;Dogs are too much responsibilitiy&quot;</span>),</a>
<a class="sourceLine" id="cb39-5" title="5">                            <span class="dv">6</span> <span class="op">-</span><span class="st"> </span>score,</a>
<a class="sourceLine" id="cb39-6" title="6">                            score))</a></code></pre></div>
<p>The code above adds a new variable <code>newscore</code> which is the result of the <code>if_else()</code> command and stores the resulting table in <code>das_coded</code>. This command has the following syntax:</p>
<p><code>if_else(condition, value_if_true, value_if_false)</code>.</p>
<p>So, if the current value of item is found within the vector of options (that’s what the <code>%in%</code> operator does), the first expression evaluates to <code>TRUE</code>, and <code>6-score</code> is returned; if the first expression evaluates to <code>FALSE</code>, then <code>score</code> is returned.</p>
<p>But whenever you recode or score a variable, you should <em>ALWAYS</em> check that your code is correct, because typos are likely. The best way to do this is to run a little test in the console. You can just print out the data from <code>das_coded</code>, or if you have a lot of data, use <code>distinct()</code> to look at check the distinct values observed in the data.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" title="1">das_coded <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb40-2" title="2"><span class="st">  </span><span class="kw">distinct</span>(item, score, newscore) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb40-3" title="3"><span class="st">  </span><span class="kw">print</span>(<span class="dt">n =</span> <span class="op">+</span><span class="ot">Inf</span>) <span class="co">## this makes sure *all* rows are printed, not just the first 20</span></a></code></pre></div>
<pre><code>## # A tibble: 16 x 3
##    item                             score newscore
##    &lt;chr&gt;                            &lt;dbl&gt;    &lt;dbl&gt;
##  1 I like dogs                          5        5
##  2 Dogs are fun                         5        5
##  3 Cats are better than dogs            1        5
##  4 Dogs are helpful                     4        4
##  5 Dogs are too noisy                   2        4
##  6 Dogs are too much responsibility     2        2
##  7 I like dogs                          3        3
##  8 Dogs are fun                         4        4
##  9 Cats are better than dogs            2        4
## 10 Dogs are too noisy                   3        3
## 11 Dogs are too much responsibility     5        5
## 12 I like dogs                          1        1
## 13 Dogs are fun                         3        3
## 14 Cats are better than dogs            5        1
## 15 Dogs are helpful                     2        2
## 16 Dogs are too noisy                   4        2</code></pre>
<p>Here we can see that “Cats are better than dogs” and “Dogs are too noisy” have been successfully reverse scored. We can also see that the items that should be forward scored, e.g., “I like dogs”, are indeed forward scored (the scores don’t change).</p>
<p>But our reverse scoring of “Dogs are too much responsibility” has failed. Can you see the problem in our code (hint: typo).</p>
<div class="webex-solution">
<button>
no, I can’t see the problem
</button>
<p><code>responsibility</code> is mistyped as <code>responsibilitiy</code></p>
</div>
<p>So the correct code is:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" title="1">das_coded &lt;-<span class="st"> </span>das <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb42-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">newscore =</span> <span class="kw">if_else</span>(item <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Cats are better than dogs&quot;</span>,</a>
<a class="sourceLine" id="cb42-3" title="3">                                        <span class="st">&quot;Dogs are too noisy&quot;</span>,</a>
<a class="sourceLine" id="cb42-4" title="4">                                        <span class="st">&quot;Dogs are too much responsibility&quot;</span>),</a>
<a class="sourceLine" id="cb42-5" title="5">                            <span class="dv">6</span> <span class="op">-</span><span class="st"> </span>score,</a>
<a class="sourceLine" id="cb42-6" title="6">                            score))</a></code></pre></div>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" title="1">das_coded <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb43-2" title="2"><span class="st">  </span><span class="kw">distinct</span>(item, score, newscore) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb43-3" title="3"><span class="st">  </span><span class="kw">print</span>(<span class="dt">n =</span> <span class="op">+</span><span class="ot">Inf</span>) <span class="co">## this makes sure *all* rows are printed, not just the first 20</span></a></code></pre></div>
<pre><code>## # A tibble: 16 x 3
##    item                             score newscore
##    &lt;chr&gt;                            &lt;dbl&gt;    &lt;dbl&gt;
##  1 I like dogs                          5        5
##  2 Dogs are fun                         5        5
##  3 Cats are better than dogs            1        5
##  4 Dogs are helpful                     4        4
##  5 Dogs are too noisy                   2        4
##  6 Dogs are too much responsibility     2        4
##  7 I like dogs                          3        3
##  8 Dogs are fun                         4        4
##  9 Cats are better than dogs            2        4
## 10 Dogs are too noisy                   3        3
## 11 Dogs are too much responsibility     5        1
## 12 I like dogs                          1        1
## 13 Dogs are fun                         3        3
## 14 Cats are better than dogs            5        1
## 15 Dogs are helpful                     2        2
## 16 Dogs are too noisy                   4        2</code></pre>
<p>We’ve done it! Now we can proceed to analyze our data further.</p>
<p><em>January 2021. -DB</em></p>

</div>
</div>
<div class="psyteachr_footer">
  
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  if (t = document.getElementById("webex-total_correct")) {
    t.innerHTML =
      document.getElementsByClassName("webex-correct").length + " of " +
      document.getElementsByClassName("webex-solveme").length + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }
  
  if (my_answer !== "" & real_answers.includes(my_answer)) {
    cl.add("webex-correct");
  } else {
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);  
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }  
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }  
  }
  
  update_total_correct();
}

window.onload = function() {
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }
  
  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off"); 
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";
    
    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;
    
    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  update_total_correct();
}

</script>
            </section>

          </div>
        </div>
      </div>
<a href="r-tips-and-tricks.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="microsoft-teams.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"],
"google": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": {},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
